"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[457],{4457:(k,m,r)=>{r.r(m),r.d(m,{crisesModule:()=>S});var a=r(6895),c=r(6333),C=r(3900),e=r(8256),g=r(1135),f=r(4004);const d=[{id:1,name:"Dragon Burning Cities"},{id:2,name:"Sky Rains Great White Sharks"},{id:3,name:"Giant Asteroid Heading For Earth"},{id:4,name:"Procrastinators Meeting Delayed Again"}];var h=r(4206);let p=(()=>{class t{constructor(n){this.messageService=n,this.crises$=new g.X(d)}getCrises(){return this.crises$}getCrisis(n){return this.getCrises().pipe((0,f.U)(i=>i.find(o=>o.id===+n)))}addCrisis(n){if(n=n.trim()){const i={id:t.nextCrisisId++,name:n};d.push(i),this.crises$.next(d)}}}return t.nextCrisisId=100,t.\u0275fac=function(n){return new(n||t)(e.LFG(h.e))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const v=function(t){return[t]};function M(t,s){if(1&t&&(e.TgZ(0,"li")(1,"a",2)(2,"span",3),e._uU(3),e.qZA(),e._uU(4),e.qZA()()),2&t){const n=s.$implicit,i=e.oxw();e.ekj("selected",n.id===i.selectedId),e.xp6(1),e.Q6J("routerLink",e.VKq(5,v,n.id)),e.xp6(2),e.Oqu(n.id),e.xp6(1),e.hij("",n.name," ")}}let O=(()=>{class t{constructor(n,i){this.service=n,this.route=i,this.selectedId=0}ngOnInit(){this.crises$=this.route.firstChild?.paramMap.pipe((0,C.w)(n=>(this.selectedId=parseInt(n.get("id"),10),this.service.getCrises())))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(p),e.Y36(c.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-crises-list"]],decls:4,vars:3,consts:[[1,"crises"],[3,"selected",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"badge"]],template:function(n,i){1&n&&(e.TgZ(0,"ul",0),e.YNc(1,M,5,7,"li",1),e.ALo(2,"async"),e.qZA(),e._UZ(3,"router-outlet")),2&n&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,i.crises$)))},dependencies:[a.sg,c.lC,c.rH,a.Ov],styles:[".crises[_ngcontent-%COMP%]{margin:0 0 2em;list-style-type:none;padding:0}.crises[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;cursor:pointer}.crises[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{left:.1em}.crises[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none;display:block;background-color:#eee;margin:.5em 0;border-radius:4px;line-height:2rem}@media (min-width: 600px){.crises[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.2rem;padding:.5em 0;line-height:1.4rem}}.crises[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#2c3a41;background-color:#e6e6e6;left:.1em}.crises[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background:#d6e6f7}.crises[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#bdd7f5}.heroes[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#d6e6f7}.heroes[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#bdd7f5}.crises[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:.5em .6em;color:#fff;background-color:#435b60;min-width:16px;margin-right:.8em;border-radius:4px 0 0 4px}"]}),t})();var u=r(9646);let x=(()=>{class t{confirm(n){const i=window.confirm(n||"Is it OK?");return(0,u.of)(i)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=r(433);function y(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div")(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"label",1),e._uU(6,"Crisis name: "),e.qZA(),e.TgZ(7,"input",2),e.NdJ("ngModelChange",function(o){e.CHM(n);const b=e.oxw();return e.KtG(b.editName=o)}),e.qZA(),e.TgZ(8,"div")(9,"button",3),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.save())}),e._uU(10,"Save"),e.qZA(),e.TgZ(11,"button",3),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.cancel())}),e._uU(12,"Cancel"),e.qZA()()()}if(2&t){const n=e.oxw();e.xp6(2),e.Oqu(n.editName),e.xp6(2),e.hij("Id: ",n.crisis.id,""),e.xp6(3),e.Q6J("ngModel",n.editName)}}let P=(()=>{class t{constructor(n,i,o){this.route=n,this.router=i,this.dialogService=o,this.editName=""}ngOnInit(){this.route.data.subscribe(n=>{console.log(n);const i=n.crisis;this.editName=i.name,this.crisis=i})}save(){this.crisis.name=this.editName,this.gotoCrises()}cancel(){this.gotoCrises()}canDeactivate(){return!this.crisis||this.crisis.name===this.editName||this.dialogService.confirm("Discard changes?")}gotoCrises(){this.router.navigate(["../",{id:this.crisis?this.crisis.id:null,foo:"foo"}],{relativeTo:this.route})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(c.gz),e.Y36(c.F0),e.Y36(x))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-crisis-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],["for","crisis-name"],["type","text","id","crisis-name","placeholder","name",3,"ngModel","ngModelChange"],["type","button",3,"click"]],template:function(n,i){1&n&&e.YNc(0,y,13,3,"div",0),2&n&&e.Q6J("ngIf",i.crisis)},dependencies:[a.O5,l.Fj,l.JJ,l.On],styles:["h2[_ngcontent-%COMP%]{font-size:1.5rem}input[_ngcontent-%COMP%]{font-size:1rem;margin-top:1rem}"]}),t})(),_=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-crisis-center"]],decls:3,vars:0,template:function(n,i){1&n&&(e.TgZ(0,"h2"),e._uU(1,"Crisis Center"),e.qZA(),e._UZ(2,"router-outlet"))},dependencies:[c.lC]}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-crisis-center-home"]],decls:2,vars:0,template:function(n,i){1&n&&(e.TgZ(0,"h3"),e._uU(1,"Welcome to the Crisis Center"),e.qZA())}}),t})();var T=r(515),F=r(5577);const A=[{path:"",component:_,children:[{path:"",component:O,children:[{path:":id",component:P,canDeactivate:[t=>!t.canDeactivate||t.canDeactivate()],resolve:{crisis:t=>{const s=(0,e.f3M)(c.F0),n=(0,e.f3M)(p),i=t.paramMap.get("id");return n.getCrisis(i).pipe((0,F.z)(o=>o?(0,u.of)(o):(s.navigate(["/crisis-center"]),T.E)))}}},{path:"",component:Z}]}]}];let I=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.Bz.forChild(A),c.Bz]}),t})(),S=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[a.ez,l.u5,I]}),t})()}}]);